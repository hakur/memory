# 1.限流算法使用漏桶算法（主要是网关服务器侧）
> ### 什么是漏桶算法？
比如现在有一个<span style="color:red;">桶</span>（假设是个数组或者golang的buffered channel）每秒放出 100个令牌，那么他的插值是10毫秒放出一个令牌，那么每10毫秒给出一个令牌，就不会出现一次性把令牌消耗光导致的爆发式访问，而是10毫秒访问一次，这样的压力曲线是很平稳的。

# 2.对于客户端的限制和程序本身要求
* 网关软件如haproxy限制每个IP的最大连接数，每个客户端的最大连接数。
* 程序本身最大连接数要能够根据当前剩余内存情况动态调整，比如内存保底剩余15%，以防止OOM kill。